#!/bin/sh

# Get the current branch name
current_branch=$(git symbolic-ref --short HEAD)

# If not on the master or develop branch, exit directly
if [ "$current_branch" != "master" ] && [ "$current_branch" != "develop" ]; then
    echo "Not on the master or develop branch, skipping pre-push hook"
    exit 0
fi

# Output debug information
echo "pre-push hook starts executing (master or develop branch only)"

# Switch to the repository root directory
cd "$(git rev-parse --show-toplevel)"

# Run the pre-push.bat script
echo "prepare_upload.bat start ..."
cmd.exe /c "$(git rev-parse --show-toplevel)/hooks/pre-push.bat"

echo "pre-push hook execution completed"